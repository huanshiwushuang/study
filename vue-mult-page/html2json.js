(function(){function a(d){var f={};d=d.split(",");for(var g=0;g<d.length;g++){f[d[g]]=!0}return f}var j=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,i=/^<\/([-A-Za-z0-9_]+)[^>]*>/,n=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,h=a("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),e=a("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),o=a("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),b=a("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),c=a("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),k=a("script,style"),l=this.HTMLParser=function(d,f){function p(v,y,u,q){y=y.toLowerCase();if(e[y]){for(;g.last()&&o[g.last()];){m("",g.last())}}b[y]&&g.last()==y&&m("",y);(q=h[y]||!!q)||g.push(y);if(f.start){var z=[];u.replace(n,function(w,H,G,C,x){w=G?G:C?C:x?x:c[H]?H:"";z.push({name:H,value:w,escaped:w.replace(/(^|[^\\])"/g,'$1\\"')})});f.start&&f.start(y,z,q)}}function m(q,u){if(u){for(q=g.length-1;0<=q&&g[q]!=u;q--){}}else{q=0}if(0<=q){for(u=g.length-1;u>=q;u--){f.end&&f.end(g[u])}g.length=q}}var g=[],r=d;for(g.last=function(){return this[this.length-1]};d;){var t=!0;if(g.last()&&k[g.last()]){d=d.replace(new RegExp("([\\s\\S]*?)</"+g.last()+"[^>]*>"),function(q,u){u=u.replace(/\x3c!--([\s\S]*?)--\x3e|<!\[CDATA\[([\s\S]*?)]]\x3e/g,"$1$2");f.chars&&f.chars(u);return""}),m("",g.last())}else{if(0==d.indexOf("\x3c!--")){var s=d.indexOf("--\x3e");0<=s&&(f.comment&&f.comment(d.substring(4,s)),d=d.substring(s+3),t=!1)}else{if(0==d.indexOf("</")){if(s=d.match(i)){d=d.substring(s[0].length),s[0].replace(i,m),t=!1}}else{0==d.indexOf("<")&&(s=d.match(j))&&(d=d.substring(s[0].length),s[0].replace(j,p),t=!1)}}t&&(s=d.indexOf("<"),t=0>s?d:d.substring(0,s),d=0>s?"":d.substring(s),f.chars&&f.chars(t))}if(d==r){throw"Parse Error: "+d}r=d}m()};this.HTMLtoXML=function(d){var f="";l(d,{start:function(p,m,g){f+="<"+p;for(p=0;p<m.length;p++){f+=" "+m[p].name+'="'+m[p].escaped+'"'}f+=">"},end:function(g){f+="</"+g+">"},chars:function(g){f+=g},comment:function(g){f+="\x3c!--"+g+"--\x3e"}});return f};this.HTMLtoDOM=function(d,f){var p=a("html,head,body,title"),m={link:"head",base:"head"};f?f=f.ownerDocument||f.getOwnerDocument&&f.getOwnerDocument()||f:"undefined"!=typeof DOMDocument?f=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?f=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(f=new ActiveXObject("Msxml.DOMDocument"));var g=[];f.documentElement||f.getDocumentElement&&f.getDocumentElement()||!f.createElement||function(){var t=f.createElement("html"),q=f.createElement("head");q.appendChild(f.createElement("title"));t.appendChild(q);t.appendChild(f.createElement("body"));f.appendChild(t)}();if(f.getElementsByTagName){for(var r in p){p[r]=f.getElementsByTagName(r)[0]}}var s=p.body;l(d,{start:function(y,u,v){if(p[y]){s=p[y],v||g.push(s)}else{var t=f.createElement(y),q;for(q in u){t.setAttribute(u[q].name,u[q].value)}m[y]&&"boolean"!=typeof p[m[y]]?p[m[y]].appendChild(t):s&&s.appendChild&&s.appendChild(t);v||(g.push(t),s=t)}},end:function(q){--g.length;s=g[g.length-1]},chars:function(q){s.appendChild(f.createTextNode(q))},comment:function(q){}});return f}})();(function(b){"object"===typeof module&&"object"===typeof module.exports&&require("../lib/Pure-JavaScript-HTML5-Parser/htmlparser.js");b.html2json=function(f){f=f.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"");var e=[],c={node:"root",child:[]};HTMLParser(f,{start:function(i,h,d){i={node:"element",tag:i};0!==h.length&&(i.attr=h.reduce(function(k,g){var j=g.name;g=g.value;g.match(/ /)&&(g=g.split(" "));k[j]?Array.isArray(k[j])?k[j].push(g):k[j]=[k[j],g]:k[j]=g;return k},{}));d?(h=e[0]||c,void 0===h.child&&(h.child=[]),h.child.push(i)):e.unshift(i)},end:function(h){var d=e.shift();d.tag!==h&&console.error("invalid state: mismatch end tag");0===e.length?c.child.push(d):(h=e[0],void 0===h.child&&(h.child=[]),h.child.push(d))},chars:function(h){h={node:"text",text:h};if(0===e.length){c.child.push(h)}else{var d=e[0];void 0===d.child&&(d.child=[]);d.child.push(h)}},comment:function(h){h={node:"comment",text:h};var d=e[0];void 0===d.child&&(d.child=[]);d.child.push(h)}});return c};b.json2html=function a(i){var h="area base basefont br col frame hr img input isindex link meta param embed".split(" "),e="";i.child&&(e=i.child.map(function(d){return a(d)}).join(""));var c="";i.attr&&(c=Object.keys(i.attr).map(function(f){var d=i.attr[f];Array.isArray(d)&&(d=d.join(" "));return f+'="'+(d+'"')}).join(" "),""!==c&&(c=" "+c));if("element"===i.node){return -1<h.indexOf(i.tag)?"<"+i.tag+c+"/>":"<"+i.tag+c+">"+e+("</"+i.tag+">")}if("text"===i.node){return i.text}if("comment"===i.node){return"\x3c!--"+i.text+"--\x3e"}if("root"===i.node){return e}}})(this);